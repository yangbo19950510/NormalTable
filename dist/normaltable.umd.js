var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,a)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,__spreadValues=(e,t)=>{for(var a in t||(t={}))__hasOwnProp.call(t,a)&&__defNormalProp(e,a,t[a]);if(__getOwnPropSymbols)for(var a of __getOwnPropSymbols(t))__propIsEnum.call(t,a)&&__defNormalProp(e,a,t[a]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__async=(e,t,a)=>new Promise(((n,r)=>{var l=e=>{try{i(a.next(e))}catch(t){r(t)}},o=e=>{try{i(a.throw(e))}catch(t){r(t)}},i=e=>e.done?n(e.value):Promise.resolve(e.value).then(l,o);i((a=a.apply(e,t)).next())}));!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).normaltable={})}(this,(function(e){"use strict";function t(e,t,a,n,r,l,o,i){var s,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),n&&(c.functional=!0),l&&(c._scopeId="data-v-"+l),o?(s=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=s):r&&(s=i?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),s)if(c.functional){c._injectStyles=s;var u=c.render;c.render=function(e,t){return s.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,s):[s]}return{exports:e,options:c}}const a={};var n=t({name:"NormalPages"},(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-pagination",e._g(e._b({staticClass:"pagination-container"},"el-pagination",e.$attrs,!1),e.$listeners))}),[],!1,r,"197991dc",null,null);function r(e){for(let t in a)this[t]=a[t]}var l=function(){return n.exports}();const o={name:"JsxRender",props:{r:{type:Function,default:()=>{}},row:{type:Object,default:()=>{}}},render(e){const t=arguments[0],{r:a,row:n}=this;return t("div",[a(n)])}};const i={};var s=t({name:"NormalSelect",props:{tabs:{type:Object,default:()=>{}},changeTabs:{type:Function,default:()=>{}}},data:()=>({options:[],type:""}),mounted(){this.init()},methods:{init(){return __async(this,null,(function*(){var e;const{list:t,defaultValue:a}=this.tabs,n=t instanceof Function?yield t():t,r=new Map([["value","value"],["id","id"]]),l=Object.keys(null==n?void 0:n[0]).find((e=>r.has(e))),o=null==(e=null==n?void 0:n[0])?void 0:e[l],i=a instanceof Function?yield a(n):a;this.type=i||0===i?i:o,this.options=n,this.changeTab()}))},changeTab(){const{type:e,tabs:t,options:a}=this;if(t.changeTab){const n=(null==a?void 0:a.find((t=>t.id===e||t.value===e)))||{};t.changeTab(n)}this.changeTabs(e)}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{on:{"tab-click":e.changeTab},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.options,(function(e){return a("el-tab-pane",{key:e.id||e.value,attrs:{label:e.label,name:e.id||e.value}})})),1)}),[],!1,c,null,null,null);function c(e){for(let t in i)this[t]=i[t]}var u=function(){return s.exports}();const d=["click","change","input","clear","clear","blur","focus"],p={Input:"el-input",Select:"NormalSelect",DatePicker:"NormalPicker",Upload:"NormalUpload",Date:"NormalDate",Cascader:"el-cascader",Radio:"NormalRadio",InputNumber:"el-input-number",Switch:"el-switch",Checkbox:"NormalCheckbox"};const h={};var m=t({name:"NormalSelect",props:["value","options","onchange"],data:()=>({newOptions:[]}),watch:{options:{handler(){this.init()},immediate:!0,deep:!0}},methods:{init(){return __async(this,null,(function*(){const{options:e=[]}=this,t=e instanceof Function;this.newOptions=t?yield e():e}))},changeSelect(e){this.$emit("input",e)}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",e._g(e._b({attrs:{value:e.value,"collapse-tags":"",clearable:""},on:{change:e.changeSelect}},"el-select",e.$attrs,!1),e.$listeners),e._l(e.newOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)}),[],!1,f,null,null,null);function f(e){for(let t in h)this[t]=h[t]}var b=function(){return m.exports}();const _={name:"DatePicker",props:{value:{type:[Array,String,Date],default:e=>e||""},defaultTime:{type:[Array,String],default:e=>e||["00:00:00","23:59:59"]},type:{type:String,default:"daterange"},valueFormat:{type:String,default:"yyyy-MM-dd"},startPlaceholder:{type:String,default:"开始日期"},endPlaceholder:{type:String,default:"结束日期"}},methods:{changeDate(e){this.$emit("input",e)}}},g={};var v=t(_,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-date-picker",e._b({staticStyle:{width:"395px"},attrs:{value:e.value,"range-separator":"至","start-placeholder":e.startPlaceholder,"end-placeholder":e.endPlaceholder,"value-format":e.valueFormat,"default-time":e.defaultTime,type:e.type},on:{input:e.changeDate}},"el-date-picker",e.$attrs,!1))}),[],!1,y,null,null,null);function y(e){for(let t in g)this[t]=g[t]}var F=function(){return v.exports}();const S={name:"NormalDate",props:{value:{type:[Array,String,Date],default:e=>e||""},type:{type:String,default:"date"},valueFormat:{type:String,default:"yyyy-MM-dd"}},methods:{changeDate(e){this.$emit("input",e)}}},P={};var k=t(S,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-date-picker",e._g(e._b({attrs:{value:e.value,type:e.type,"value-format":e.valueFormat},on:{input:e.changeDate}},"el-date-picker",e.$attrs,!1),e.$listeners))}),[],!1,x,null,null,null);function x(e){for(let t in P)this[t]=P[t]}var N=function(){return k.exports}();const w={name:"NormalRadio",props:{options:{type:Array,default:[]},value:{type:[String,Number,Boolean],default:e=>null!=e?e:""}},watch:{value:{immediate:!0,handler(e){this.radioValue=e}}},data:()=>({radioValue:""}),methods:{handleChange(e){this.$emit("input",e)}}},$={};var O=t(w,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-radio-group",e._g(e._b({on:{change:e.handleChange},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},"el-radio-group",e.$attrs,!1),e.$listeners),e._l(e.options,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value,disabled:t.disabled}},[e._v(" "+e._s(t.label)+" ")])})),1)}),[],!1,T,null,null,null);function T(e){for(let t in $)this[t]=$[t]}var B=function(){return O.exports}();const C={};var V=t({name:"NormalCheckbox",props:{options:{type:Array,default:[]},value:{type:Array,default:e=>null!=e?e:[]}},watch:{value:{immediate:!0,handler(e){this.checkboxValue=e}}},data:()=>({checkboxValue:[]}),methods:{handleChange(e){this.$emit("input",e)}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-checkbox-group",e._g(e._b({attrs:{value:e.checkboxValue},on:{change:e.handleChange}},"el-checkbox-group",e.$attrs,!1),e.$listeners),e._l(e.options,(function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.value,checked:!!t.checked,disabled:!!t.disabled}},[e._v(" "+e._s(t.label)+" ")])})),1)}),[],!1,E,null,null,null);function E(e){for(let t in C)this[t]=C[t]}var D=function(){return V.exports}();const j={};var A=t({name:"NormalForm",components:{NormalSelect:b,NormalPicker:F,NormalDate:N,NormalRadio:B,NormalCheckbox:D},props:{tablesFilter:{type:Array,default:()=>[]},operations:{type:Array,default:()=>[]},getList:{type:Function,default:()=>{}}},data:()=>({componentsData:p,searchForm:{}}),computed:{getBindAll:e=>e=>{const{options:t}=(null==e?void 0:e.bind)||{},a="function"==typeof t?null==t?void 0:t():t;return __spreadValues(__spreadProps(__spreadValues({},a&&{options:a}),{placeholder:e.label}),e.bind)},getEventsAll:e=>e=>{const t=(null==e?void 0:e.bind)||{},a={};return Object.keys(t).forEach((e=>{d.includes(e)&&(a[e]=t[e])})),a},getBtnBind:e=>e=>{var t;return null!=(t=null==e?void 0:e.bind)?t:{}}},methods:{handleSearch(){this.getList(__spreadValues({},this.searchForm))},clearSearchForm(e){this.$refs[e].resetFields(),this.searchForm={},this.handleSearch()}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"normalForm",attrs:{model:e.searchForm,inline:!0,size:"small"}},[e._l(e.tablesFilter,(function(t){return a("el-form-item",{key:t.prop,attrs:{prop:t.prop}},[a(e.componentsData[t.tag],e._g(e._b({tag:"component",attrs:{clearable:""},model:{value:e.searchForm[t.prop],callback:function(a){e.$set(e.searchForm,t.prop,a)},expression:"searchForm[item.prop]"}},"component",e.getBindAll(t),!1),e.getEventsAll(t)))],1)})),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("搜索")]),a("el-button",{on:{click:function(t){return e.clearSearchForm("normalForm")}}},[e._v("重置")])],1)],2),[e._l(e.operations,(function(t,n){return[t.hide?e._e():a("el-button",e._b({key:n,attrs:{size:t.size||"mini",type:t.type||"info"},nativeOn:{click:function(e){return e.preventDefault(),t.call()}}},"el-button",e.getBtnBind(t),!1),[e._v(e._s(t.label))])]}))]],2)}),[],!1,R,null,null,null);function R(e){for(let t in j)this[t]=j[t]}const U={};var L=t({name:"NormalTable",components:{JsxRender:o,NoramlForm:function(){return A.exports}(),NoramlTabs:u,Pagination:l},props:{tables:{type:Object,required:!0,default:()=>{}}},data:()=>({datas:{list:[]},currentTab:"",filterValue:{},curPage:{},loading:!1}),computed:{onSearch(){return this.tables.onSearch},tableOperates:e=>(e,t)=>{const{btns:a}=e;return"function"==typeof a?a(t.row):a},jsxRender:e=>(e,t)=>"function"==typeof e?e(t):e,isTabs:e=>e=>!!(null==e?void 0:e.list),gather(){const{getList:e,tables:{filter:t,operations:a}}=this;return{getList:e,tablesFilter:t,operations:a}},getColumns:e=>e=>__spreadProps(__spreadValues({},e),{align:e.align||"center"}),isPageShow(){var e;const{datas:t,tables:a}=this;return(null==(e=null==t?void 0:t.list)?void 0:e.length)>0&&!a.noPage},getPagesBind(){var e;const{total:t=0,pageSize:a=10,currentPage:n=1}=null!=(e=this.datas)?e:{};return{total:t,pageSize:a,currentPage:n}},getBtnBind:e=>e=>{var t;return null!=(t=null==e?void 0:e.bind)?t:{}}},mounted(){this.init()},activated(){this.init()},methods:{init(){const{isTabs:e,tables:t}=this;e(t.tabs)||this.getList()},getList(e){return __async(this,null,(function*(){e&&(this.filterValue=e,this.curPage.page=1);const{curPage:t,onSearch:a,currentTab:n}=this,r={filterValue:this.filterValue,currentTab:n,pagination:t};try{this.datas=(yield a(r))||[]}catch(l){console.error("onSearch出错了")}}))},confirmFn(e){return new Promise(((t,a)=>{this.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(t).catch(a)}))},handleBtn(e,t){if(!t.confirm)return t.call(e);this.confirmFn(t.confirm).then((a=>t.call(e))).catch((e=>console.log("取消")))},changePage(e){this.curPage=__spreadProps(__spreadValues({},this.curPage),{page:e}),this.getList()},changeTabs(e){this.currentTab=e,this.getList()}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.tables.columns?[e.isTabs(e.tables.tabs)?a("NoramlTabs",{attrs:{tabs:e.tables.tabs,"change-tabs":e.changeTabs}}):e._e(),e.tables.filter?a("NoramlForm",e._b({},"NoramlForm",e.gather,!1)):e._e(),a("el-table",e._g(e._b({directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.datas.list,border:""}},"el-table",e.$attrs,!1),e.$listeners),[e._l(e.tables.columns,(function(t){return[t.render?a("el-table-column",{key:t.label,attrs:{label:t.label,width:t.width||"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("jsxRender",{attrs:{r:t.render,row:e.row}})]}}],null,!0)}):t.btns?a("el-table-column",{key:t.label,attrs:{label:t.label,fixed:t.fixed||!1,width:t.width||"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._l(e.tableOperates(t,n),(function(t,r){return[t.hide?e._e():a("el-button",e._b({key:r,staticClass:"normalButton",attrs:{size:t.size||"mini",type:t.type||"info"},nativeOn:{click:function(a){return a.preventDefault(),e.handleBtn(n.row,t)}}},"el-button",e.getBtnBind(t),!1),[e._v(" "+e._s(t.label)+" ")])]}))]}}],null,!0)}):a("el-table-column",e._b({key:t.label},"el-table-column",e.getColumns(t),!1))]}))],2),e.isPageShow?a("Pagination",e._b({on:{"current-change":e.changePage}},"Pagination",e.getPagesBind,!1)):e._e()]:e._e()],2)}),[],!1,J,"4d6f58f5",null,null);function J(e){for(let t in U)this[t]=U[t]}var z=function(){return L.exports}();const M={};var I=t({name:"NormalUpload",props:{options:{type:Array,default:[]},value:{type:Array,default:e=>null!=e?e:[]}},data:()=>({imageUrl:[]}),methods:{handleAvatarSuccess(e,t){this.imageUrl=URL.createObjectURL(t.raw)}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])}),[],!1,q,"2a199661",null,null);function q(e){for(let t in M)this[t]=M[t]}const X={};var W=t({name:"NormalForm",components:{NormalSelect:b,NormalDate:N,NormalPicker:F,NormalRadio:B,NormalCheckbox:D,NormalUpload:function(){return I.exports}(),JsxRender:o},props:{normalForm:{type:Object,required:!0,default:()=>{}}},data:()=>({componentsData:p,title:"",dialogStatus:!1,searchForm:[]}),computed:{getBindAll:e=>e=>__spreadValues({placeholder:e.label},e.bind),dialogBind(){const{dialogBind:e={width:"600px"}}=this.normalForm;return console.log(e,"dialogBind"),__spreadValues({},e)},allBind:e=>({prop:e,label:t,rules:a,bind:n})=>__spreadProps(__spreadValues({},n),{label:t,prop:e,rules:a}),getEventsAll:e=>({bind:e={}})=>{const t={};return Object.keys(e).forEach((a=>{d.includes(a)&&(t[a]=e[a])})),t},getFormBefore(){const{searchForm:e,normalForm:{list:t}}=this;return"function"==typeof t?t(e):t},getFormList(){return this.getFormBefore.filter((e=>!e.hide))}},methods:{open(e="提示",t={}){this.title=e,this.dialogStatus=!0,this.searchForm=JSON.parse(JSON.stringify(t))},openFilter(e="提示",t={}){this.title=e,this.dialogStatus=!0;const{getFormBefore:a}=this,n={};a.forEach((e=>{const a=e.prop;(t[a]||0===t[a])&&(n[a]=t[a])}));const r=/id/i;for(const l in t)-1!==l.search(r)&&(n[l]=t[l]);this.searchForm=n},setFieldsValue(e){const{searchForm:t}=this;this.searchForm=__spreadValues(__spreadValues({},t),e)},close(){this.dialogStatus=!1},submit(){return __async(this,null,(function*(){const{normalForm:e,searchForm:t}=this;"function"==typeof(null==e?void 0:e.submit)&&this.$refs.normalForm.validate((a=>__async(this,null,(function*(){if(!a)return!1;const n=JSON.parse(JSON.stringify(t));(yield e.submit(n))||this.close()}))))}))}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",e._b({attrs:{title:e.title,visible:e.dialogStatus},on:{"update:visible":function(t){e.dialogStatus=t}}},"el-dialog",e.dialogBind,!1),[a("el-form",{ref:"normalForm",attrs:{model:e.searchForm,"label-width":e.normalForm.labelWidth||"180px"}},e._l(e.getFormList,(function(t){return a("el-form-item",e._b({key:t.prop,class:e.normalForm.inline?"form_itme":""},"el-form-item",e.allBind(t),!1),[t.render?a("JsxRender",{attrs:{r:t.render,row:e.searchForm}}):e.componentsData[t.tag]?a(e.componentsData[t.tag],e._g(e._b({tag:"component",model:{value:e.searchForm[t.prop],callback:function(a){e.$set(e.searchForm,t.prop,a)},expression:"searchForm[item.prop]"}},"component",e.getBindAll(t),!1),e.getEventsAll(t))):a("div",[e._v("tag配置错误")])],1)})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)}),[],!1,G,"feafa698",null,null);function G(e){for(let t in X)this[t]=X[t]}const H={NormalTable:z,NormalForm:function(){return W.exports}()},K=function(e){Object.keys(H).forEach((t=>{const a=H[t];e.component(a.name,a)}))};var Q={Components:H,install:K};e.Components=H,e.default=Q,e.install=K,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
//# sourceMappingURL=normaltable.umd.js.map
